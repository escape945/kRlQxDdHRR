const _0xc213b7=_0x70c0;(function(_0x34d2db,_0xfc766d){const _0x1c4dd4=_0x70c0,_0x47cd72=_0x34d2db();while(!![]){try{const _0x560d53=parseInt(_0x1c4dd4(0x125))/0x1*(-parseInt(_0x1c4dd4(0x109))/0x2)+parseInt(_0x1c4dd4(0x146))/0x3+parseInt(_0x1c4dd4(0x123))/0x4*(-parseInt(_0x1c4dd4(0x15c))/0x5)+-parseInt(_0x1c4dd4(0x13f))/0x6+parseInt(_0x1c4dd4(0x11c))/0x7*(parseInt(_0x1c4dd4(0xd2))/0x8)+-parseInt(_0x1c4dd4(0xe2))/0x9*(parseInt(_0x1c4dd4(0x118))/0xa)+-parseInt(_0x1c4dd4(0x102))/0xb*(-parseInt(_0x1c4dd4(0x131))/0xc);if(_0x560d53===_0xfc766d)break;else _0x47cd72['push'](_0x47cd72['shift']());}catch(_0x589352){_0x47cd72['push'](_0x47cd72['shift']());}}}(_0x3f00,0x371d6));function _0x70c0(_0x260d5d,_0x4dcd52){const _0x3f0074=_0x3f00();return _0x70c0=function(_0x70c0a9,_0x404f69){_0x70c0a9=_0x70c0a9-0xcc;let _0x13336e=_0x3f0074[_0x70c0a9];return _0x13336e;},_0x70c0(_0x260d5d,_0x4dcd52);}const express=require('express'),fs=require('fs'),os=require('os'),path=require(_0xc213b7(0x12c)),cp=require(_0xc213b7(0x153)),http=require(_0xc213b7(0x12a)),https=require(_0xc213b7(0xe9)),stream=require(_0xc213b7(0x138)),httpProxyMiddleware=require(_0xc213b7(0x113)),dotenv=require('dotenv'),CoreConfigHandler=require(_0xc213b7(0x13d));let err404='<!DOCTYPE\x20html><html\x20lang=\x22en\x22><head><meta\x20charset=\x22UTF-8\x22><meta\x20http-equiv=\x22X-UA-Compatible\x22\x20content=\x22IE=edge\x22><meta\x20name=\x22viewport\x22\x20content=\x22width=device-width,initial-scale=1\x22><title>Page\x20not\x20found</title><style>*{margin:0;padding:0;font-family:sans-serif}body,html{width:100%;height:100%;overflow:auto;color:#000;background-color:#fff;box-sizing:border-box}.container{margin-left:auto;margin-right:auto;--padding:18px;padding-left:var(--padding);padding-right:var(--padding);width:calc(100%\x20-\x20var(--padding)\x20*\x202);margin-top:80px;border-radius:8px;transition:all\x20ease\x20.2s,background-color\x200s,color\x200s}@media\x20(min-width:980px){.container{max-width:978px}}@media\x20(min-width:1200px){.container{max-width:1128px}}@media\x20(max-height:500px){.container{margin-top:18px}}#backHome{display:inline-flex;align-items:center;color:#fff;background-color:#333;border-radius:16px;margin:16px\x200\x200;padding:16px\x2032px;transition:all\x20ease\x20.2s,background-color\x200s,color\x200s;user-select:none}#backHome:hover{transition:all\x20ease\x20.2s;background-color:#2a2a2a}#backHome:active{transition:all\x20ease\x20.2s;background-color:#2a2a2a;transform:scale(.95)}#backHome\x20svg{fill:#fff}.col-2{color:#222}.headline-1{font-size:3em;font-weight:600;margin-bottom:24px}.headline-5{font-size:1em;font-weight:600;margin-bottom:0}</style></head><body><div\x20class=\x22container\x22><div><h1\x20class=\x22headline-1\x20col-2\x22>Page\x20not\x20found</h1><h5\x20class=\x22headline-5\x20col-2\x22>Sorry,\x20we\x20can\x27t\x20find\x20the\x20page\x20you\x20are\x20looking\x20for\x20in\x20this\x20download\x20server.</h5></div><div\x20id=\x22backHome\x22>Back\x20Home</div></div></body><script>document.querySelector(\x27#backHome\x27).addEventListener(\x27click\x27,\x20()\x20=>\x20{\x20location.pathname\x20=\x20\x22/\x22\x20});</script></html>';dotenv[_0xc213b7(0xd1)]();const app=express(),config=((()=>{const _0x4f9596=_0xc213b7;let _0xeed5a4;try{_0xeed5a4=JSON[_0x4f9596(0x157)](process[_0x4f9596(0xf4)][_0x4f9596(0xd9)]);}catch{try{_0xeed5a4=JSON[_0x4f9596(0x157)](fs[_0x4f9596(0xe5)](_0x4f9596(0x116))[_0x4f9596(0x10f)]());}catch{_0xeed5a4={};}}let _0x1e1271;_0xeed5a4[_0x4f9596(0xf7)]&&(_0x1e1271={'warp_secretKey':_0xeed5a4[_0x4f9596(0xf7)][_0x4f9596(0x12d)]||'','warp_ipv6':_0xeed5a4[_0x4f9596(0xf7)][_0x4f9596(0x105)]||'','warp_endpoint':_0xeed5a4[_0x4f9596(0xf7)][_0x4f9596(0x117)]||_0x4f9596(0x111),'add_ipv4':_0xeed5a4[_0x4f9596(0xf7)][_0x4f9596(0xea)]||![],'add_ipv6':_0xeed5a4['warp'][_0x4f9596(0x11e)]||![]});let _0x2c02ef;_0xeed5a4['argo']&&(_0x2c02ef={'argo_path':_0xeed5a4[_0x4f9596(0x15a)]||(os[_0x4f9596(0x151)]()==_0x4f9596(0x10a)?_0x4f9596(0x133):_0x4f9596(0xfd)),'use_argo':_0xeed5a4['argo'][_0x4f9596(0x150)]||![],'argo_protocol':_0xeed5a4[_0x4f9596(0x115)][_0x4f9596(0x12b)]||'','argo_region':_0xeed5a4['argo']['region']||'','argo_access_token':_0xeed5a4['argo'][_0x4f9596(0x140)]||''});let _0x294421;return _0xeed5a4[_0x4f9596(0x126)]&&(_0x294421={'use_tls':_0xeed5a4['tls'][_0x4f9596(0x150)]||![],'tls_key':Buffer[_0x4f9596(0x139)](_0xeed5a4['tls'][_0x4f9596(0x12d)],_0x4f9596(0x124))[_0x4f9596(0x10f)]()||'','tls_cert':Buffer['from'](_0xeed5a4[_0x4f9596(0x126)][_0x4f9596(0x158)],'base64')[_0x4f9596(0x10f)]()||''}),{'core_path':_0xeed5a4[_0x4f9596(0x119)]||(os[_0x4f9596(0x151)]()==_0x4f9596(0x10a)?_0x4f9596(0x107):_0x4f9596(0x130)),'port':_0xeed5a4['port']||0xbb8,'middle_port':_0xeed5a4[_0x4f9596(0x14e)]||0x2328,'protocol':_0xeed5a4['protocol']||_0x4f9596(0x136),'uuid':_0xeed5a4['uuid']||guid(),'path':_0xeed5a4['path']||'/api',..._0x294421,..._0x1e1271,..._0x2c02ef};})());function guid(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'['replace'](/[xy]/g,function(_0x3ff55c){const _0x17e451=_0x70c0;var _0x603473=Math['random']()*0x10|0x0,_0xe295b=_0x3ff55c=='x'?_0x603473:_0x603473&0x3|0x8;return _0xe295b[_0x17e451(0x10f)](0x10);});}app['get'](_0xc213b7(0xf3),(_0x58a4c5,_0x46246d)=>{const _0x34429f=_0xc213b7;_0x46246d[_0x34429f(0x10e)](0xcc)['send']('');}),app[_0xc213b7(0x12e)](_0xc213b7(0x11a)+config[_0xc213b7(0x12c)],(_0x2986f8,_0x274c6c)=>{const _0x495517=_0xc213b7;_0x274c6c[_0x495517(0x149)]('Content-Type',_0x495517(0xd7))[_0x495517(0x144)](cp[_0x495517(0xd3)](_0x495517(0xfe))[_0x495517(0x10f)]());});const wsProxy=httpProxyMiddleware[_0xc213b7(0x14a)]({'target':'http://127.0.0.1:'+config[_0xc213b7(0x14e)]+'/','changeOrigin':!![],'ws':!![],'logLevel':'silent'});app[_0xc213b7(0x150)](config[_0xc213b7(0x12c)],wsProxy),app['use']((_0x32810c,_0x57fe59,_0x3a8c93)=>{const _0x5dc9b4=_0xc213b7;_0x57fe59[_0x5dc9b4(0x10e)](0x194)[_0x5dc9b4(0x144)](err404);});function download_core(){return new Promise(async(_0x3eacf2,_0x4dbda7)=>{const _0x34f55b=_0x70c0;let _0x30f1c6=_0x34f55b(0xec);if(os[_0x34f55b(0x151)]()==_0x34f55b(0xfb)){let _0x46b180='';switch(os[_0x34f55b(0xfa)]()){case'x64':_0x46b180+='';break;default:_0x4dbda7(_0x34f55b(0x137));return;break;}_0x30f1c6=_0x30f1c6+_0x46b180;}else{_0x4dbda7('Core:\x20Unsupport\x20Platform');return;}try{const _0x1d1ec9=await(await fetch(_0x30f1c6,{'redirect':'follow','cache':_0x34f55b(0xda)}))['arrayBuffer']();fs[_0x34f55b(0xce)](path[_0x34f55b(0xcf)](process[_0x34f55b(0x154)](),config[_0x34f55b(0x119)]),Buffer[_0x34f55b(0x139)](_0x1d1ec9)),_0x3eacf2(!![]);}catch(_0x2c9b47){console[_0x34f55b(0x14f)](_0x2c9b47),_0x3eacf2(![]);}});}async function start_core(){const _0x26f1ad=_0xc213b7;let _0x2ed5d1={};if(config[_0x26f1ad(0x15d)]&&config[_0x26f1ad(0x104)]&&(config['add_ipv4']||config[_0x26f1ad(0x11f)])){let _0x4adba7='IPIfNonMatch',_0x30fc94=[{'type':_0x26f1ad(0x13a),'ip':[_0x26f1ad(0x13b)],'outboundTag':config['add_ipv4']?'wireguard':_0x26f1ad(0xe1)},{'type':'field','ip':[_0x26f1ad(0x120)],'outboundTag':config[_0x26f1ad(0x11f)]?_0x26f1ad(0x15b):_0x26f1ad(0xe1)}];config[_0x26f1ad(0x14c)]&&config[_0x26f1ad(0x11f)]&&(_0x4adba7='AsIs',_0x30fc94=[{'type':_0x26f1ad(0x13a),'port':_0x26f1ad(0x145),'outboundTag':'wireguard'}]),_0x2ed5d1={'OutboundCustom':[{'protocol':_0x26f1ad(0xdf),'settings':{},'tag':'direct'},{'protocol':_0x26f1ad(0xf0),'settings':{},'tag':'blocked'},{'protocol':_0x26f1ad(0x15b),'settings':{'secretKey':config[_0x26f1ad(0x15d)],'address':['172.16.0.2/32',config['warp_ipv6']+_0x26f1ad(0x128)],'peers':[{'publicKey':_0x26f1ad(0xf2),'allowedIPs':[_0x26f1ad(0x13b),'::/0'],'endpoint':config[_0x26f1ad(0x100)]+_0x26f1ad(0xed)}],'reserved':[0x0,0x0,0x0],'mtu':0x58c},'tag':_0x26f1ad(0x15b)}],'RoutingCustom':{'domainStrategy':_0x4adba7,'rules':[..._0x30fc94,{'outboundTag':_0x26f1ad(0xf5),'protocol':[_0x26f1ad(0xdd)],'type':_0x26f1ad(0x13a)}]}};}let _0xdf0fdd=new CoreConfigHandler[(_0x26f1ad(0x142))]()[_0x26f1ad(0x143)]({'InboundPort':config[_0x26f1ad(0x14e)],'InboundAddress':_0x26f1ad(0x10d),'sniffingEnabled':![],'InboundProtocol':Buffer['from'](config[_0x26f1ad(0x12b)],_0x26f1ad(0x124))['toString'](),'InboundUUID':config[_0x26f1ad(0xf9)],'InboundStreamType':'ws','InboundEncryption':_0x26f1ad(0x14d),'InboundAlterId':0x0,'InboundStreamSecurity':_0x26f1ad(0xf6),'InboundPath':config[_0x26f1ad(0x12c)],..._0x2ed5d1});_0xdf0fdd=JSON[_0x26f1ad(0xd0)](_0xdf0fdd,null,''),await(_0x4e872c=>{return new Promise(async _0x2f65de=>{const _0x3efca2=_0x70c0;if(os[_0x3efca2(0x151)]()!=_0x3efca2(0xfb)){_0x2f65de();return;}let _0x3d66f2=['+x',path['resolve'](process[_0x3efca2(0x154)](),config[_0x3efca2(0x119)])],_0x43a2c0=cp[_0x3efca2(0x10b)](_0x3efca2(0xd4),_0x3d66f2);_0x43a2c0['on'](_0x3efca2(0xcc),()=>{const _0x133c3c=_0x3efca2;console[_0x133c3c(0x14f)](_0x133c3c(0x112),_0x133c3c(0xd6)),setTimeout(_0x2f233c=>_0x2f65de(),0x64);});});})();let _0x537cee=cp[_0x26f1ad(0x10b)](path[_0x26f1ad(0xcf)](process['cwd'](),config[_0x26f1ad(0x119)]),['-c',_0x26f1ad(0x12f)]),_0x28bf76=new stream['Readable']();return _0x28bf76['push'](_0xdf0fdd),_0x28bf76[_0x26f1ad(0x135)](null),_0x28bf76[_0x26f1ad(0x121)](_0x537cee['stdin']),new Promise(_0x183fa3=>{const _0x5409d8=_0x26f1ad;_0x537cee[_0x5409d8(0xfc)]['on'](_0x5409d8(0xe4),_0x52bd6f=>{const _0x2ab515=_0x5409d8;/[0-9/]* [0-9:]* \[Warning\] core: .* started/['test'](_0x52bd6f)&&(console['log']('----------\x0a\x20\x20[Config]\x0a\x20\x20path:\x20'+config[_0x2ab515(0x12c)]+'\x0a\x20\x20uuid:\x20'+config['uuid']+_0x2ab515(0x13e)),_0x183fa3(_0x2ab515(0xcd)));}),_0x537cee['on'](_0x5409d8(0x127),_0x216f30=>{_0x183fa3('[初始化]\x20core启动错误：'+_0x216f30);});});}function download_argo(){return new Promise(async(_0x2af284,_0x30b3dc)=>{const _0x33856b=_0x70c0;let _0x57d8a8=_0x33856b(0x141);if(os[_0x33856b(0x151)]()==_0x33856b(0xfb)){let _0xc5f0ab=_0x33856b(0xe0);switch(os['arch']()){case _0x33856b(0x152):_0xc5f0ab+='arm64';break;case'x64':_0xc5f0ab+='amd64';break;default:_0x30b3dc(_0x33856b(0x134));return;break;}_0x57d8a8=_0x57d8a8+_0xc5f0ab;}else{if(os[_0x33856b(0x151)]()=='win32'){let _0x57a499='cloudflared-windows-';switch(os[_0x33856b(0xfa)]()){case _0x33856b(0x110):_0x57a499+='amd64.exe';break;default:_0x30b3dc(_0x33856b(0x134));return;break;}_0x57d8a8=_0x57d8a8+_0x57a499;}else{_0x30b3dc('Unsupport\x20Platform');return;}}try{const _0x35ed4d=await(await fetch(_0x57d8a8,{'redirect':_0x33856b(0x14b),'cache':_0x33856b(0xda)}))['arrayBuffer']();fs['writeFileSync'](path[_0x33856b(0xcf)](process[_0x33856b(0x154)](),config[_0x33856b(0x15a)]),Buffer[_0x33856b(0x139)](_0x35ed4d)),_0x2af284(!![]);}catch(_0x2cb71){console[_0x33856b(0x14f)](_0x2cb71),_0x2af284(![]);}});}async function start_argo(){const _0x1268b3=_0xc213b7;await(_0x4f4b97=>{return new Promise(async _0x108064=>{const _0x40700b=_0x70c0;if(os[_0x40700b(0x151)]()!='linux'){_0x108064();return;}let _0x342245=['+x',path['resolve'](process[_0x40700b(0x154)](),config['argo_path'])],_0x2b4e7a=cp[_0x40700b(0x10b)](_0x40700b(0xd4),_0x342245);_0x2b4e7a['on'](_0x40700b(0xcc),()=>{const _0x461ca9=_0x40700b;console[_0x461ca9(0x14f)](_0x461ca9(0x112),_0x461ca9(0x159)),setTimeout(_0x1443c5=>_0x108064(),0x64);});});})();let _0xb6192f=[_0x1268b3(0x129),_0x1268b3(0x132)+config[_0x1268b3(0x148)]];config[_0x1268b3(0xde)]&&(_0xb6192f=['run',_0x1268b3(0x155),config[_0x1268b3(0xde)]],console[_0x1268b3(0x14f)](_0x1268b3(0x15e),_0x1268b3(0x13c)));config['argo_protocol']&&_0xb6192f['push'](_0x1268b3(0xe3),config[_0x1268b3(0xee)]);config[_0x1268b3(0x11b)]&&_0xb6192f[_0x1268b3(0x135)]('--region',config[_0x1268b3(0x11b)]);let _0x58e11e=cp[_0x1268b3(0x10b)](path[_0x1268b3(0xcf)](process[_0x1268b3(0x154)](),config[_0x1268b3(0x15a)]),['tunnel',_0x1268b3(0x122),..._0xb6192f]);return new Promise(_0x223257=>{const _0x392233=_0x1268b3;_0x58e11e[_0x392233(0xff)]['on']('data',_0x12112f=>{const _0x1fb3ec=_0x392233;if(/Registered tunnel connection/[_0x1fb3ec(0x106)](_0x12112f))console[_0x1fb3ec(0x14f)](_0x1fb3ec(0x147),_0x12112f[_0x1fb3ec(0x10f)]()[_0x1fb3ec(0xe8)](/(?<=Registered tunnel connection).*/)[0x0][_0x1fb3ec(0x103)]());else{if(!config[_0x1fb3ec(0xde)]&&/https:\/\/.*[a-z]+cloudflare.com/['test'](_0x12112f))console['log'](_0x1fb3ec(0x15e),_0x1fb3ec(0x10c)+_0x12112f['toString']()[_0x1fb3ec(0xe8)](/(?<=https:\/\/).*[a-z]+cloudflare.com/)[0x0]);else{}}_0x223257(_0x1fb3ec(0xf1));}),_0x58e11e['on'](_0x392233(0x127),_0x6f8ddd=>{const _0x5d0c0c=_0x392233;_0x223257(_0x5d0c0c(0xe7)+_0x6f8ddd);});});}function _0x3f00(){const _0x13afc3=['stdout','./cloudflared','ps\x20aux|sort\x20-rn\x20-k\x20+4|head\x20-50','stderr','warp_endpoint','existsSync','13881461hGZmkg','trim','warp_ipv6','ipv6','test','./core.exe','upgrade','10BUdYcZ','win32','spawn','domain:\x20','127.0.0.1','status','toString','x64','engage.cloudflareclient.com','[初始化]','http-proxy-middleware','statusCode','argo','./config.json','endpoint','10LcDMIB','core_path','/debug','argo_region','281638qxoehJ','argo下载失败','add6','add_ipv6','::/0','pipe','--no-autoupdate','4fJVePK','base64','50550anTkvf','tls','error','/128','--url','http','protocol','path','key','get','stdin:','./core','12jGTLUO','http://localhost:','./cloudflared.exe','Cloudflared:\x20Unsupport\x20Arch','push','dmxlc3M=','Core:\x20Unsupport\x20Arch','stream','from','field','0.0.0.0/0','domain:\x20Custom\x20Token','./utils/coreConfigHandler.js','\x0a\x20\x20----------','2499918ERKNhQ','token','https://github.com/cloudflare/cloudflared/releases/latest/download/','default','generateServerConfig','send','0-65535','787692kuVFGH','[Argo\x20Info]','port','setHeader','createProxyMiddleware','follow','add_ipv4','auto','middle_port','log','use','platform','arm64','child_process','cwd','--token','core已存在','parse','cert','argo\x20chmod完成','argo_path','wireguard','1723385ARhVIJ','warp_secretKey','[Argo\x20Config]','close','[初始化]\x20core启动成功','writeFileSync','resolve','stringify','config','8DLWVuo','execSync','chmod','core下载失败','core\x20chmod完成','text/plain','ceil','CONFIG','no-store','Enabled\x20https','[软件]','bittorrent','argo_access_token','freedom','cloudflared-linux-','direct','2924271olEmKc','--protocol','data','readFileSync','listen','[初始化]\x20argo启动错误：','match','https','add4','argo已存在','https://tt.vg/DrLSV',':2408','argo_protocol','请求错误:\x20','blackhole','[初始化]\x20argo启动成功','bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=','/generate_204','env','blocked','none','warp','use_tls','uuid','arch','linux'];_0x3f00=function(){return _0x13afc3;};return _0x3f00();}function listen_port(){const _0x2aed1b=_0xc213b7;let _0x213086;if(config[_0x2aed1b(0xf8)]){console[_0x2aed1b(0x14f)](_0x2aed1b(0xdc),_0x2aed1b(0xdb));if(config['tls_cert']&&config['tls_key']){const _0x2a822d={'key':config['tls_key'],'cert':config['tls_cert']};_0x213086=https['createServer'](_0x2a822d,app);}else console['log'](_0x2aed1b(0xdc),'https\x20missing:\x20tls_cert,tls_key');}else _0x213086=http['createServer'](app);_0x213086[_0x2aed1b(0xe6)](config[_0x2aed1b(0x148)],()=>{const _0x48bef5=_0x2aed1b;console[_0x48bef5(0x14f)](_0x48bef5(0xdc),'Listening\x20on\x20port\x20'+config[_0x48bef5(0x148)]);}),_0x213086['on'](_0x2aed1b(0x108),wsProxy['upgrade']);}(async _0x4b6d6b=>{})(),start();async function start(){const _0x2aaecc=_0xc213b7;if(config['use_argo']){if(!fs[_0x2aaecc(0x101)](path[_0x2aaecc(0xcf)](process[_0x2aaecc(0x154)](),config['argo_path']))){const _0xf8cd32=await download_argo();_0xf8cd32?console[_0x2aaecc(0x14f)](_0x2aaecc(0x112),'argo下载成功'):console['log']('[初始化]',_0x2aaecc(0x11d));}else console[_0x2aaecc(0x14f)](_0x2aaecc(0x112),_0x2aaecc(0xeb));console[_0x2aaecc(0x14f)](await start_argo());}if(!fs[_0x2aaecc(0x101)](path[_0x2aaecc(0xcf)](process[_0x2aaecc(0x154)](),config['core_path']))){const _0x1e697b=await download_core();_0x1e697b?console[_0x2aaecc(0x14f)](_0x2aaecc(0x112),'core下载成功'):console['log'](_0x2aaecc(0x112),_0x2aaecc(0xd5));}else console[_0x2aaecc(0x14f)]('[初始化]',_0x2aaecc(0x156));console[_0x2aaecc(0x14f)](await start_core()),listen_port();}keepalive();function keepalive(){const _0x16816c=_0xc213b7;let _0x1b54c4='';_0x1b54c4=process[_0x16816c(0xf4)]['RENDER_EXTERNAL_HOSTNAME'];if(!_0x1b54c4)return;https['get']('https://'+_0x1b54c4+_0x16816c(0xf3),_0x31e6ee=>{const _0x5d2f50=_0x16816c;if(_0x31e6ee['statusCode']==0xcc){}else console[_0x5d2f50(0x14f)](_0x5d2f50(0xef)+_0x31e6ee[_0x5d2f50(0x114)]);})['on'](_0x16816c(0x127),_0x11cfa5=>{const _0x2c4b03=_0x16816c;console[_0x2c4b03(0x14f)](_0x2c4b03(0xef)+_0x11cfa5);}),setTimeout(()=>{keepalive();},Math[_0x16816c(0xd8)](Math['random']()*0xf)*0x3e8*0x3c/0x2);}
