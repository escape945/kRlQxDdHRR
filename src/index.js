const _0x9eb71a=_0x1bd9;(function(_0xdc5468,_0x414ba0){const _0x1aabff=_0x1bd9,_0x330a6c=_0xdc5468();while(!![]){try{const _0x2c6e83=parseInt(_0x1aabff(0xf6))/0x1+parseInt(_0x1aabff(0x162))/0x2+parseInt(_0x1aabff(0x179))/0x3*(parseInt(_0x1aabff(0x166))/0x4)+parseInt(_0x1aabff(0xe1))/0x5*(-parseInt(_0x1aabff(0x149))/0x6)+parseInt(_0x1aabff(0x13e))/0x7+parseInt(_0x1aabff(0x11b))/0x8*(-parseInt(_0x1aabff(0x133))/0x9)+parseInt(_0x1aabff(0x16c))/0xa;if(_0x2c6e83===_0x414ba0)break;else _0x330a6c['push'](_0x330a6c['shift']());}catch(_0xfabe67){_0x330a6c['push'](_0x330a6c['shift']());}}}(_0x4724,0xa76f1));const express=require('express'),axios=require(_0x9eb71a(0x163)),fs=require('fs'),os=require('os'),path=require('path'),cp=require(_0x9eb71a(0x128)),http=require(_0x9eb71a(0xe9)),https=require(_0x9eb71a(0xc6)),stream=require(_0x9eb71a(0x13f)),httpProxyMiddleware=require(_0x9eb71a(0xea)),dotenv=require(_0x9eb71a(0xd2)),CoreConfigHandler=require(_0x9eb71a(0x15f));function _0x4724(){const _0x5ddd4c=['--version','argo\x20chmod完成','endpoint','Enabled\x20https','5516776TxaWvg','ipv4','0-65535','network','chunked','argo_access_token','run','env','auto','tls_key','----------\x0a[Config]\x0apath:\x20','core下载失败','upgrade','child_process','freedom','amd64.exe','config','/32','blocked','add_ipv6','spawn','default','http://localhost:','writeFileSync','9JSMRAP','./core','add6','replace','domain:\x20Custom\x20Token','end','ps\x20aux|sort\x20-rn\x20-k\x20+4|head\x20-50','versions','\x0a\x0aArgo\x20version:','win32','stderr','251181xqOxIh','stream','argo_protocol','0.0.0.0/0','Cloudflared:\x20Unsupport\x20Arch\x20-\x20','trim','query','createServer','key','请求错误:\x20','core\x20chmod完成','18BUWisN','match','readFileSync','tls_cert','close','warp_ipv6','bittorrent','log','http://127.0.0.1:','core启动失败：','\x0a\x20\x20\x20\x20','kill','string','uuid','[软件]','pipe','Listening\x20on\x20port\x20','Address\x20in\x20use,\x20retrying...','platform','argo启动失败：','--protocol','toString','./utils/coreConfigHandler.js','--no-autoupdate','web_process','1786448PkhfIy','axios','argo下载成功','listen','4KvoYWx','[Argo\x20Config]','[Argo\x20Info]','createProxyMiddleware','from','wireguard','1940130FltthS','push','CONFIG','arm64','core已存在','cwd','get','warp_publicKey','call','linux','web_process_debug','protocol','x64','245211uoUIxx','use','url','web_process_path','resolve','<!DOCTYPE\x20html><html\x20lang=\x22en\x22><head><meta\x20charset=\x22UTF-8\x22><meta\x20http-equiv=\x22X-UA-Compatible\x22\x20content=\x22IE=edge\x22><meta\x20name=\x22viewport\x22\x20content=\x22width=device-width,initial-scale=1\x22><title>Page\x20not\x20found</title><style>*{margin:0;padding:0;font-family:sans-serif}body,html{width:100%;height:100%;overflow:auto;color:#000;background-color:#fff;box-sizing:border-box}.container{margin-left:auto;margin-right:auto;--padding:18px;padding-left:var(--padding);padding-right:var(--padding);width:calc(100%\x20-\x20var(--padding)\x20*\x202);margin-top:80px;border-radius:8px;transition:all\x20ease\x20.2s,background-color\x200s,color\x200s}@media\x20(min-width:980px){.container{max-width:978px}}@media\x20(min-width:1200px){.container{max-width:1128px}}@media\x20(max-height:500px){.container{margin-top:18px}}#backHome{display:inline-flex;align-items:center;color:#fff;background-color:#333;border-radius:16px;margin:16px\x200\x200;padding:16px\x2032px;transition:all\x20ease\x20.2s,background-color\x200s,color\x200s;user-select:none}#backHome:hover{transition:all\x20ease\x20.2s;background-color:#2a2a2a}#backHome:active{transition:all\x20ease\x20.2s;background-color:#2a2a2a;transform:scale(.95)}#backHome\x20svg{fill:#fff}.col-2{color:#222}.headline-1{font-size:3em;font-weight:600;margin-bottom:24px}.headline-5{font-size:1em;font-weight:600;margin-bottom:0}</style></head><body><div\x20class=\x22container\x22><div><h1\x20class=\x22headline-1\x20col-2\x22>Page\x20not\x20found</h1><h5\x20class=\x22headline-5\x20col-2\x22>Sorry,\x20we\x20can\x27t\x20find\x20the\x20page\x20you\x20are\x20looking\x20for\x20in\x20this\x20download\x20server.</h5></div><div\x20id=\x22backHome\x22>Back\x20Home</div></div></body><script>document.querySelector(\x27#backHome\x27).addEventListener(\x27click\x27,\x20()\x20=>\x20{\x20location.pathname\x20=\x20\x22/\x22\x20});</script></html>','add_ipv4','core_path','Config\x20Error','cert','Transfer-Encoding','\x0a\x0aCore\x20version:','https','<!DOCTYPE\x20html><html\x20lang=\x22en\x22><head><meta\x20charset=\x22UTF-8\x22\x20/><meta\x20http-equiv=\x22X-UA-Compatible\x22\x20content=\x22IE=edge\x22\x20/><meta\x20name=\x22viewport\x22\x20content=\x22width=device-width,initial-scale=1\x22\x20/><title>Handle\x20Page</title><style>*{margin:0;padding:0;font-family:sans-serif;box-sizing:border-box;scrollbar-width:thin}body,html{width:100%;height:100%;overflow:hidden;color:#000;background-color:#fff}body{display:flex;flex-direction:row}@media\x20(max-width:980px){body{flex-direction:column}}.container{display:inline-block;--padding:18px;padding-left:var(--padding);border-radius:8px;transition:all\x20ease\x20.2s,background-color\x200s,color\x200s}.btn{display:inline-flex;align-items:center;color:#fff;background-color:#333;border-radius:12px;padding:8px\x2016px;margin-right:4px;margin-bottom:4px;transition:all\x20ease\x20.2s,background-color\x200s,color\x200s;user-select:none}.btn:hover{transition:all\x20ease\x20.2s;background-color:#2a2a2a}.btn:active{transition:all\x20ease\x20.2s;background-color:#2a2a2a;transform:scale(.95)}.btn\x20svg{fill:#fff}.col-2{color:#222}.headline-1{font-size:3em;font-weight:600;margin-bottom:12px}.headline-5{font-size:1em;font-weight:600;margin-bottom:0}iframe{border:#181818\x202px\x20solid;width:100%;height:100%;border-radius:12px}.container2{display:inline-block;width:100%;height:100%;padding:8px}</style></head><body><div\x20class=\x22container\x22><h1\x20class=\x22headline-1\x20col-2\x22>Handle\x20Page</h1><div><h5\x20class=\x22headline-5\x20col-2\x22>Update</h5><div\x20class=\x22btn\x22>Restart</div><div\x20class=\x22btn\x22>Core</div><div\x20class=\x22btn\x22>Argo</div><div\x20class=\x22btn\x22>All</div><br\x20/><br\x20/><h5\x20class=\x22headline-5\x20col-2\x22>Version</h5><div\x20class=\x22btn\x22>Get</div><div\x20class=\x22btn\x22>Clear</div></div></div><div\x20class=\x22container2\x22><iframe\x20src=\x22about:blank\x22\x20frameborder=\x220\x22></iframe></div></body><script>let\x20iframe=document.querySelector(\x22iframe\x22);document.querySelectorAll(\x22.btn\x22).forEach(element=>{element.addEventListener(\x22click\x22,()=>{switch(element.innerHTML){case\x22Restart\x22:iframe.src=location.href+\x22/update\x22;break;case\x22Core\x22:iframe.src=location.href+\x22/update?core\x22;break;case\x22Argo\x22:iframe.src=location.href+\x22/update?argo\x22;break;case\x22All\x22:iframe.src=location.href+\x22/update?core&argo\x22;break;case\x22Get\x22:iframe.src=location.href+\x22/version\x22;break;default:iframe.src=\x22about:blank\x22;break}})});</script></html>','path','./cloudflared.exe','core下载成功','base64','/debug','argo','tls','Content-Type','core启动成功','web_process\x20off','dotenv','127.0.0.1','error','use_tls','Cloudflared:\x20Unsupport\x20Platform\x20-\x20','warp_secretKey','cloudflared-linux-','parse','172.16.0.2','execSync','ceil','hex','----\x20Done','token','display_web_entry','747430cVXRFh','generateServerConfig','add4','amd64','EADDRINUSE','pubkey','write','argo_path','http','http-proxy-middleware','/generate_204','xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx','/update','/api','stdout','bmXOC+F1FxEMF9dyiK2H5/1SUtzH0JuVo51h2wPfgyo=','hasOwnProperty','domain:\x20','random','use_argo','arraybuffer','619007hLPCsJ','warp','setHeader','IPIfNonMatch','send','[初始化]','./core.exe','cloudflared-windows-','\x0a----------','arch','middle_port','warp_endpoint','chmod','----\x20Start','https://github.com/cloudflare/cloudflared/releases/latest/download/','destroy','test','web_process_debug\x20off','warp_ipv4','argo启动成功','map','reserved','stdin','field','text/plain;\x20charset=utf-8','status','argo_region','existsSync','statusCode','direct','./config.json','port','data'];_0x4724=function(){return _0x5ddd4c;};return _0x4724();}let err404=_0x9eb71a(0xbf),handlepage=_0x9eb71a(0xc7);dotenv[_0x9eb71a(0x12b)]();const app=express(),config=((()=>{const _0x3f54c3=_0x9eb71a;let _0x271314;try{_0x271314=JSON[_0x3f54c3(0xd9)](process[_0x3f54c3(0x122)][_0x3f54c3(0x16e)]);}catch{try{_0x271314=JSON[_0x3f54c3(0xd9)](fs[_0x3f54c3(0x14b)](_0x3f54c3(0x114))[_0x3f54c3(0x15e)]());}catch{console['log'](_0x3f54c3(0x157),_0x3f54c3(0xc2)),_0x271314={};}}let _0x161d90={};if(_0x271314[_0x3f54c3(0xf7)]){_0x161d90={..._0x161d90,'warp_secretKey':_0x271314[_0x3f54c3(0xf7)][_0x3f54c3(0x146)]||'','warp_ipv4':_0x271314[_0x3f54c3(0xf7)][_0x3f54c3(0x11c)]||_0x3f54c3(0xda),'warp_ipv6':_0x271314['warp']['ipv6']||'','warp_reserved':[0x0,0x0,0x0],'warp_publicKey':_0x271314[_0x3f54c3(0xf7)][_0x3f54c3(0xe6)]||_0x3f54c3(0xf0),'warp_endpoint':_0x271314['warp'][_0x3f54c3(0x119)]||'engage.cloudflareclient.com:2408','add_ipv4':_0x271314['warp'][_0x3f54c3(0xe3)]||![],'add_ipv6':_0x271314[_0x3f54c3(0xf7)][_0x3f54c3(0x135)]||![]};if(_0x271314[_0x3f54c3(0xf7)][_0x3f54c3(0x10b)]){function _0x318288(_0x48efed){const _0x282272=_0x3f54c3,_0x3d844e=Buffer['from'](_0x48efed,_0x282272(0xcb)),_0x5bf291=_0x3d844e[_0x282272(0x15e)](_0x282272(0xdd)),_0x1983b1=_0x5bf291[_0x282272(0x14a)](/.{1,2}/g)||[],_0x1cffec=_0x1983b1[_0x282272(0x10a)](_0x4c2005=>parseInt(_0x4c2005,0x10));return _0x1cffec;}_0x161d90['warp_reserved']=_0x318288(_0x271314[_0x3f54c3(0xf7)]['reserved']);}}let _0x4c3a66={'argo_path':_0x271314[_0x3f54c3(0xe8)]||(os['platform']()=='win32'?_0x3f54c3(0xc9):'./cloudflared')};_0x271314['argo']&&(_0x4c3a66={..._0x4c3a66,'use_argo':_0x271314[_0x3f54c3(0xcd)][_0x3f54c3(0x17a)]||![],'argo_protocol':_0x271314[_0x3f54c3(0xcd)][_0x3f54c3(0x177)]||'','argo_region':_0x271314[_0x3f54c3(0xcd)]['region']||'','argo_access_token':_0x271314[_0x3f54c3(0xcd)][_0x3f54c3(0xdf)]||''});let _0x3af6d5={};return _0x271314['tls']&&(_0x3af6d5={..._0x3af6d5,'use_tls':_0x271314[_0x3f54c3(0xce)][_0x3f54c3(0x17a)]||![],'tls_key':Buffer[_0x3f54c3(0x16a)](_0x271314[_0x3f54c3(0xce)][_0x3f54c3(0x146)],_0x3f54c3(0xcb))[_0x3f54c3(0x15e)]()||'','tls_cert':Buffer['from'](_0x271314['tls'][_0x3f54c3(0xc3)],_0x3f54c3(0xcb))['toString']()||''}),{'core_path':_0x271314[_0x3f54c3(0xc1)]||(os[_0x3f54c3(0x15b)]()==_0x3f54c3(0x13c)?_0x3f54c3(0xfc):_0x3f54c3(0x134)),'port':_0x271314[_0x3f54c3(0x115)]||0xbb8,'middle_port':_0x271314[_0x3f54c3(0x100)]||0xe493,'protocol':_0x271314[_0x3f54c3(0x177)]||'dmxlc3M=','network':_0x271314[_0x3f54c3(0x11e)]||'ws','uuid':_0x271314[_0x3f54c3(0x156)]||guid(),'path':_0x271314['path']||_0x3f54c3(0xee),'display_web_entry':_0x271314['display_web_entry']||![],'web_process':_0x271314[_0x3f54c3(0x161)]||![],'web_process_path':_0x271314[_0x3f54c3(0xbd)]||'','web_process_debug':_0x271314['web_process_debug']||![],..._0x3af6d5,..._0x161d90,..._0x4c3a66};})());function guid(){const _0x1b2a0d=_0x9eb71a;return _0x1b2a0d(0xec)[_0x1b2a0d(0x136)](/[xy]/g,function(_0x9ce5cd){const _0x1b9238=_0x1b2a0d;var _0x3441ed=Math[_0x1b9238(0xf3)]()*0x10|0x0,_0x44c4d8=_0x9ce5cd=='x'?_0x3441ed:_0x3441ed&0x3|0x8;return _0x44c4d8[_0x1b9238(0x15e)](0x10);});}let pid_core=NaN,pid_argo=NaN;app['get'](_0x9eb71a(0xeb),(_0x506348,_0x53d067)=>{const _0x50b75f=_0x9eb71a;_0x53d067[_0x50b75f(0x10f)](0xcc)['send']('');}),app[_0x9eb71a(0x172)](config[_0x9eb71a(0xc8)]+config[_0x9eb71a(0xbd)],(_0x754154,_0xddb4f0,_0x272a24)=>{const _0x9ecedc=_0x9eb71a;config[_0x9ecedc(0xe0)]?_0xddb4f0['send'](handlepage):_0x272a24();}),app['get'](config[_0x9eb71a(0xc8)]+config[_0x9eb71a(0xbd)]+_0x9eb71a(0xcc),(_0x53b9a9,_0x3e8521)=>{const _0x2105ed=_0x9eb71a;_0x3e8521['setHeader'](_0x2105ed(0xcf),_0x2105ed(0x10e)),_0x3e8521[_0x2105ed(0xf8)](_0x2105ed(0xc4),_0x2105ed(0x11f));if(!config[_0x2105ed(0x176)]){_0x3e8521['end'](_0x2105ed(0x107));return;}_0x3e8521[_0x2105ed(0x138)](cp[_0x2105ed(0xdb)](_0x2105ed(0x139))[_0x2105ed(0x15e)]());}),app[_0x9eb71a(0x172)](config[_0x9eb71a(0xc8)]+config['web_process_path']+_0x9eb71a(0xed),async(_0x50c99e,_0x5e7a9d)=>{const _0x2235bc=_0x9eb71a;_0x5e7a9d['setHeader'](_0x2235bc(0xcf),_0x2235bc(0x10e)),_0x5e7a9d['setHeader'](_0x2235bc(0xc4),_0x2235bc(0x11f));if(!config['web_process']){_0x5e7a9d[_0x2235bc(0x138)]('web_process\x20off');return;}_0x5e7a9d[_0x2235bc(0xe7)](_0x2235bc(0x103));if(!isNaN(pid_argo))process[_0x2235bc(0x154)](pid_argo);if(!isNaN(pid_core))process[_0x2235bc(0x154)](pid_core);pid_core=NaN,pid_argo=NaN;if(typeof _0x50c99e[_0x2235bc(0x144)][_0x2235bc(0xcd)]==_0x2235bc(0x155))try{const _0x40383d=await download_argo();_0x40383d?_0x5e7a9d[_0x2235bc(0xe7)]('\x0a'+'argo下载成功'+_0x2235bc(0x153)+_0x40383d):_0x5e7a9d[_0x2235bc(0xe7)]('\x0a'+'argo下载失败'+_0x2235bc(0x153)+_0x40383d);}catch(_0x410613){_0x5e7a9d['write']('\x0a'+'argo下载失败'+_0x2235bc(0x153)+_0x410613);}if(typeof _0x50c99e[_0x2235bc(0x144)]['core']=='string')try{const _0x21dbf2=await download_core();_0x21dbf2?_0x5e7a9d[_0x2235bc(0xe7)]('\x0a'+_0x2235bc(0xca)+'\x0a\x20\x20\x20\x20'+_0x21dbf2):_0x5e7a9d[_0x2235bc(0xe7)]('\x0a'+_0x2235bc(0x126)+_0x2235bc(0x153)+_0x21dbf2);}catch(_0x5e5332){_0x5e7a9d[_0x2235bc(0xe7)]('\x0a'+_0x2235bc(0x126)+_0x2235bc(0x153)+_0x5e5332);}start(!![]),_0x5e7a9d[_0x2235bc(0x138)]('\x0a'+_0x2235bc(0xde));}),app['get'](config[_0x9eb71a(0xc8)]+config['web_process_path']+'/version',async(_0x110800,_0x13a847)=>{const _0x3abb4b=_0x9eb71a;_0x13a847['setHeader']('Content-Type','text/plain;\x20charset=utf-8'),_0x13a847[_0x3abb4b(0xf8)](_0x3abb4b(0xc4),_0x3abb4b(0x11f));if(!config[_0x3abb4b(0x161)]){_0x13a847['end'](_0x3abb4b(0xd1));return;}_0x13a847[_0x3abb4b(0xe7)]('Node\x20version:');let _0x37ca0c=process[_0x3abb4b(0x13a)];for(const _0x4731b3 in _0x37ca0c){if(Object[_0x3abb4b(0xf1)][_0x3abb4b(0x174)](_0x37ca0c,_0x4731b3)){const _0x4295a2=_0x37ca0c[_0x4731b3];_0x13a847['write']('\x0a\x20\x20\x20\x20'+_0x4731b3+':\x20'+_0x4295a2);}}_0x13a847[_0x3abb4b(0xe7)](_0x3abb4b(0xc5));const _0xeaf19e=await(_0x360067=>{return new Promise(async _0x328c75=>{const _0x2a79b6=_0x1bd9;let _0x51c851=[_0x2a79b6(0x117)],_0x59f42a=cp[_0x2a79b6(0x12f)](config[_0x2a79b6(0xc1)],_0x51c851),_0xc23fa0='';_0x59f42a[_0x2a79b6(0xef)]['on'](_0x2a79b6(0x116),_0x3fea34=>{const _0x576344=_0x2a79b6;_0xc23fa0+=_0x3fea34[_0x576344(0x15e)]();}),_0x59f42a['on'](_0x2a79b6(0x14d),()=>{_0x328c75(_0xc23fa0);});});})();_0x13a847['write'](_0x3abb4b(0x153)+_0xeaf19e),_0x13a847[_0x3abb4b(0xe7)](_0x3abb4b(0x13b));const _0x55e4cc=await(_0x1b1521=>{return new Promise(async _0x2fb572=>{const _0x4f021e=_0x1bd9;let _0x478fda=['--version'],_0xecf799=cp['spawn'](config[_0x4f021e(0xe8)],_0x478fda),_0x74e5d5='';_0xecf799[_0x4f021e(0xef)]['on'](_0x4f021e(0x116),_0x56b1b9=>{_0x74e5d5+=_0x56b1b9['toString']();}),_0xecf799['on'](_0x4f021e(0x14d),()=>{_0x2fb572(_0x74e5d5);});});})();_0x13a847['write']('\x0a\x20\x20\x20\x20'+_0x55e4cc),_0x13a847[_0x3abb4b(0x138)](null);});const wsProxy=httpProxyMiddleware[_0x9eb71a(0x169)]({'target':_0x9eb71a(0x151)+config[_0x9eb71a(0x100)]+'/','changeOrigin':!![],'ws':!![],'logLevel':'silent'});function _0x1bd9(_0x24aa69,_0x24a317){const _0x4724ea=_0x4724();return _0x1bd9=function(_0x1bd903,_0x265cb2){_0x1bd903=_0x1bd903-0xbd;let _0x5e0000=_0x4724ea[_0x1bd903];return _0x5e0000;},_0x1bd9(_0x24aa69,_0x24a317);}app['use']((_0x3d4845,_0x30c868,_0x258bf1)=>{const _0x2baa4a=_0x9eb71a;_0x30c868[_0x2baa4a(0x10f)](0x194)[_0x2baa4a(0xfa)](err404);});function download_core(){return new Promise(async(_0x144ccc,_0x2d6c8f)=>{const _0x54b18e=_0x1bd9;let _0x57cf22='https://shorten.zdvsn3xs.workers.dev/cJSKWM';if(os[_0x54b18e(0x15b)]()==_0x54b18e(0x175)){let _0x1d030d='';switch(os[_0x54b18e(0xff)]()){case'x64':_0x1d030d+='';break;default:_0x2d6c8f('Core:\x20Unsupport\x20Arch\x20-\x20'+os[_0x54b18e(0xff)]());return;break;}_0x57cf22=_0x57cf22+_0x1d030d;}else{_0x2d6c8f('Core:\x20Unsupport\x20Platform\x20-\x20'+os[_0x54b18e(0x15b)]());return;}try{const _0x7e048c=await axios({'method':_0x54b18e(0x172),'url':_0x57cf22,'responseType':_0x54b18e(0xf5),'maxRedirects':0xa});fs[_0x54b18e(0x132)](path[_0x54b18e(0xbe)](process['cwd'](),config['core_path']),_0x7e048c[_0x54b18e(0x116)]),_0x144ccc(!![]);}catch(_0x107e27){console[_0x54b18e(0x150)](_0x107e27),_0x144ccc(![]);}});}async function start_core(){const _0x45a4f5=_0x9eb71a;let _0x58ee39={};if(config[_0x45a4f5(0xd7)]&&config[_0x45a4f5(0x14e)]&&(config[_0x45a4f5(0xc0)]||config[_0x45a4f5(0x12e)])){let _0x2ce781=_0x45a4f5(0xf9),_0xd43af0=[{'type':'field','ip':[_0x45a4f5(0x141)],'outboundTag':config[_0x45a4f5(0xc0)]?'wireguard':_0x45a4f5(0x113)},{'type':_0x45a4f5(0x10d),'ip':['::/0'],'outboundTag':config['add_ipv6']?_0x45a4f5(0x16b):'direct'}];config[_0x45a4f5(0xc0)]&&config[_0x45a4f5(0x12e)]&&(_0x2ce781='AsIs',_0xd43af0=[{'type':_0x45a4f5(0x10d),'port':_0x45a4f5(0x11d),'outboundTag':_0x45a4f5(0x16b)}]),_0x58ee39={'OutboundCustom':[{'protocol':_0x45a4f5(0x129),'settings':{},'tag':_0x45a4f5(0x113)},{'protocol':'blackhole','settings':{},'tag':_0x45a4f5(0x12d)},{'protocol':_0x45a4f5(0x16b),'settings':{'kernelMode':![],'secretKey':config[_0x45a4f5(0xd7)],'address':[config[_0x45a4f5(0x108)]+_0x45a4f5(0x12c),config[_0x45a4f5(0x14e)]+'/128'],'peers':[{'publicKey':config[_0x45a4f5(0x173)],'endpoint':config[_0x45a4f5(0x101)]}],'reserved':config['warp_reserved'],'mtu':0x58c},'tag':_0x45a4f5(0x16b)}],'RoutingCustom':{'domainStrategy':_0x2ce781,'rules':[..._0xd43af0,{'outboundTag':_0x45a4f5(0x12d),'protocol':[_0x45a4f5(0x14f)],'type':_0x45a4f5(0x10d)}]}};}let _0x59288b=new CoreConfigHandler[(_0x45a4f5(0x130))]()[_0x45a4f5(0xe2)]({'InboundPort':config[_0x45a4f5(0x100)],'InboundAddress':_0x45a4f5(0xd3),'sniffingEnabled':![],'InboundProtocol':Buffer['from'](config[_0x45a4f5(0x177)],_0x45a4f5(0xcb))[_0x45a4f5(0x15e)](),'InboundUUID':config[_0x45a4f5(0x156)],'InboundStreamType':config[_0x45a4f5(0x11e)],'InboundEncryption':_0x45a4f5(0x123),'InboundAlterId':0x0,'InboundStreamSecurity':'none','InboundPath':config[_0x45a4f5(0xc8)],..._0x58ee39});_0x59288b=JSON['stringify'](_0x59288b,null,''),await(_0x559ec4=>{return new Promise(async _0x20b490=>{const _0x18bffd=_0x1bd9;if(os[_0x18bffd(0x15b)]()!=_0x18bffd(0x175)){_0x20b490();return;}let _0x476e25=['+x',path['resolve'](process[_0x18bffd(0x171)](),config[_0x18bffd(0xc1)])],_0x9093d9=cp[_0x18bffd(0x12f)](_0x18bffd(0x102),_0x476e25);_0x9093d9['on'](_0x18bffd(0x14d),()=>{const _0x1eef4d=_0x18bffd;console[_0x1eef4d(0x150)]('[初始化]',_0x1eef4d(0x148)),setTimeout(_0x39201d=>_0x20b490(),0x64);});});})();let _0x36f320=cp[_0x45a4f5(0x12f)](path['resolve'](process[_0x45a4f5(0x171)](),config[_0x45a4f5(0xc1)]),['-c','stdin:']),_0xe1797e=new stream['Readable']();return _0xe1797e[_0x45a4f5(0x16d)](_0x59288b),_0xe1797e['push'](null),_0xe1797e[_0x45a4f5(0x158)](_0x36f320[_0x45a4f5(0x10c)]),new Promise(_0x2ecd9e=>{const _0x4ea501=_0x45a4f5;_0x36f320['stdout']['on'](_0x4ea501(0x116),_0x5e9b13=>{const _0x52dbee=_0x4ea501;/[0-9/]* [0-9:]* \[Warning\] core: .* started/[_0x52dbee(0x106)](_0x5e9b13)&&(console['log'](_0x52dbee(0x125)+config[_0x52dbee(0xc8)]+'\x0auuid:\x20'+config[_0x52dbee(0x156)]+_0x52dbee(0xfe)),_0x2ecd9e([!![],_0x36f320['pid']]));}),_0x36f320['on'](_0x4ea501(0xd4),_0x1ccbe4=>{_0x2ecd9e([![],_0x1ccbe4]);});});}function download_argo(){return new Promise(async(_0x39eeb9,_0x46f954)=>{const _0x4ed9c8=_0x1bd9;let _0x514ae2=_0x4ed9c8(0x104);if(os[_0x4ed9c8(0x15b)]()=='linux'){let _0x2df3b8=_0x4ed9c8(0xd8);switch(os[_0x4ed9c8(0xff)]()){case _0x4ed9c8(0x16f):_0x2df3b8+=_0x4ed9c8(0x16f);break;case _0x4ed9c8(0x178):_0x2df3b8+=_0x4ed9c8(0xe4);break;default:_0x46f954(_0x4ed9c8(0x142)+os[_0x4ed9c8(0xff)]());return;break;}_0x514ae2=_0x514ae2+_0x2df3b8;}else{if(os[_0x4ed9c8(0x15b)]()==_0x4ed9c8(0x13c)){let _0x4da908=_0x4ed9c8(0xfd);switch(os['arch']()){case'x64':_0x4da908+=_0x4ed9c8(0x12a);break;default:_0x46f954(_0x4ed9c8(0x142)+os[_0x4ed9c8(0xff)]());return;break;}_0x514ae2=_0x514ae2+_0x4da908;}else{_0x46f954(_0x4ed9c8(0xd6)+os[_0x4ed9c8(0x15b)]());return;}}try{const _0x1ca703=await axios({'url':_0x514ae2,'responseType':'arraybuffer','maxRedirects':0xa});fs[_0x4ed9c8(0x132)](path[_0x4ed9c8(0xbe)](process[_0x4ed9c8(0x171)](),config[_0x4ed9c8(0xe8)]),_0x1ca703['data']),_0x39eeb9(!![]);}catch(_0x4eb227){console[_0x4ed9c8(0x150)](_0x4eb227),_0x39eeb9(![]);}});}async function start_argo(){const _0x5ee8b5=_0x9eb71a;await(_0x456e44=>{return new Promise(async _0x3dc6f5=>{const _0x4a7cc0=_0x1bd9;if(os['platform']()!='linux'){_0x3dc6f5();return;}let _0x1da8fb=['+x',path['resolve'](process[_0x4a7cc0(0x171)](),config[_0x4a7cc0(0xe8)])],_0x335989=cp[_0x4a7cc0(0x12f)](_0x4a7cc0(0x102),_0x1da8fb);_0x335989['on'](_0x4a7cc0(0x14d),()=>{const _0x444e71=_0x4a7cc0;console[_0x444e71(0x150)](_0x444e71(0xfb),_0x444e71(0x118)),setTimeout(_0x357776=>_0x3dc6f5(),0x64);});});})();let _0x5f3e84=['--url',_0x5ee8b5(0x131)+config[_0x5ee8b5(0x115)]];config['argo_access_token']&&(_0x5f3e84=[_0x5ee8b5(0x121),'--token',config[_0x5ee8b5(0x120)]],console[_0x5ee8b5(0x150)](_0x5ee8b5(0x167),_0x5ee8b5(0x137)));config['argo_protocol']&&_0x5f3e84[_0x5ee8b5(0x16d)](_0x5ee8b5(0x15d),config[_0x5ee8b5(0x140)]);config['argo_region']&&_0x5f3e84[_0x5ee8b5(0x16d)]('--region',config[_0x5ee8b5(0x110)]);let _0x3cb6a3=cp[_0x5ee8b5(0x12f)](path[_0x5ee8b5(0xbe)](process[_0x5ee8b5(0x171)](),config[_0x5ee8b5(0xe8)]),['tunnel',_0x5ee8b5(0x160),..._0x5f3e84]);return new Promise(_0x2a9d32=>{const _0xaf27f5=_0x5ee8b5;_0x3cb6a3[_0xaf27f5(0x13d)]['on'](_0xaf27f5(0x116),_0x35b670=>{const _0x529c1d=_0xaf27f5;if(/Registered tunnel connection/['test'](_0x35b670))console[_0x529c1d(0x150)](_0x529c1d(0x168),_0x35b670[_0x529c1d(0x15e)]()[_0x529c1d(0x14a)](/(?<=Registered tunnel connection).*/)[0x0][_0x529c1d(0x143)]());else{if(!config[_0x529c1d(0x120)]&&/https:\/\/.*[a-z]+cloudflare.com/[_0x529c1d(0x106)](_0x35b670))console[_0x529c1d(0x150)](_0x529c1d(0x167),_0x529c1d(0xf2)+_0x35b670[_0x529c1d(0x15e)]()['match'](/(?<=https:\/\/).*[a-z]+cloudflare.com/)[0x0]);else{}}_0x2a9d32([!![],_0x3cb6a3['pid']]);}),_0x3cb6a3['on']('error',_0x36da54=>{_0x2a9d32([![],_0x36da54]);});});}function listen_port(){const _0xd7cbe1=_0x9eb71a;let _0xe6fd56;if(config[_0xd7cbe1(0xd5)]){console[_0xd7cbe1(0x150)]('[软件]',_0xd7cbe1(0x11a));if(config[_0xd7cbe1(0x14c)]&&config[_0xd7cbe1(0x124)]){const _0xe10c10={'key':config['tls_key'],'cert':config[_0xd7cbe1(0x14c)]};_0xe6fd56=https[_0xd7cbe1(0x145)](_0xe10c10,app);}else console['log'](_0xd7cbe1(0x157),'https\x20missing:\x20tls_cert,tls_key');}else _0xe6fd56=http[_0xd7cbe1(0x145)](app);const _0x1c7e91=_0x3640d2=>{const _0xf320e4=_0xd7cbe1;_0x3640d2[_0xf320e4(0x165)](config[_0xf320e4(0x115)],()=>{const _0x199ce5=_0xf320e4;console['log'](_0x199ce5(0x157),_0x199ce5(0x159)+config[_0x199ce5(0x115)]);});};_0x1c7e91(_0xe6fd56),_0xe6fd56['on'](_0xd7cbe1(0xd4),_0x3bc1d2=>{const _0x2b114f=_0xd7cbe1;_0x3bc1d2['code']===_0x2b114f(0xe5)&&(console[_0x2b114f(0xd4)](_0x2b114f(0x15a)),setTimeout(()=>{const _0x4f28f5=_0x2b114f;_0xe6fd56[_0x4f28f5(0x14d)](),_0x1c7e91(_0xe6fd56);},0x3e8));}),_0xe6fd56['on'](_0xd7cbe1(0x127),(_0x2422cd,_0x33e871,_0xb9e2f5)=>{const _0x930130=_0xd7cbe1;_0x2422cd[_0x930130(0x17b)]['split']('?')[0x0]===config[_0x930130(0xc8)]?wsProxy[_0x930130(0x127)](_0x2422cd,_0x33e871,_0xb9e2f5):_0x33e871[_0x930130(0x105)]();});}(async _0x3ff999=>{})(),start();async function start(_0x4ccb2f=![]){const _0x548a7e=_0x9eb71a;if(config[_0x548a7e(0xf4)]){if(!fs[_0x548a7e(0x111)](path[_0x548a7e(0xbe)](process['cwd'](),config[_0x548a7e(0xe8)]))){const _0x3e8dcc=await download_argo();_0x3e8dcc?console[_0x548a7e(0x150)]('[初始化]',_0x548a7e(0x164)):console[_0x548a7e(0x150)]('[初始化]','argo下载失败');}else console[_0x548a7e(0x150)]('[初始化]','argo已存在');const _0x471ea0=await start_argo();_0x471ea0[0x0]?(pid_argo=_0x471ea0[0x1],console[_0x548a7e(0x150)](_0x548a7e(0xfb),_0x548a7e(0x109))):console[_0x548a7e(0x150)](_0x548a7e(0xfb),_0x548a7e(0x15c),_0x471ea0[0x1]);}if(!fs[_0x548a7e(0x111)](path[_0x548a7e(0xbe)](process[_0x548a7e(0x171)](),config[_0x548a7e(0xc1)]))){const _0x58fdfc=await download_core();_0x58fdfc?console[_0x548a7e(0x150)](_0x548a7e(0xfb),_0x548a7e(0xca)):console[_0x548a7e(0x150)](_0x548a7e(0xfb),_0x548a7e(0x126));}else console[_0x548a7e(0x150)](_0x548a7e(0xfb),_0x548a7e(0x170));const _0x441a90=await start_core();_0x441a90[0x0]?(pid_core=_0x441a90[0x1],console[_0x548a7e(0x150)](_0x548a7e(0xfb),_0x548a7e(0xd0))):console[_0x548a7e(0x150)](_0x548a7e(0xfb),_0x548a7e(0x152),_0x441a90[0x1]);if(!_0x4ccb2f)listen_port();}keepalive();function keepalive(){const _0x5493b9=_0x9eb71a;let _0x244b90='';_0x244b90=process[_0x5493b9(0x122)]['RENDER_EXTERNAL_HOSTNAME'];if(!_0x244b90)return;https[_0x5493b9(0x172)]('https://'+_0x244b90+'/generate_204',_0x1bd091=>{const _0x3623ed=_0x5493b9;if(_0x1bd091[_0x3623ed(0x112)]==0xcc){}else{}})['on'](_0x5493b9(0xd4),_0x29f113=>{const _0xd7b187=_0x5493b9;console[_0xd7b187(0x150)](_0xd7b187(0x147)+_0x29f113);}),setTimeout(()=>{keepalive();},Math[_0x5493b9(0xdc)](Math[_0x5493b9(0xf3)]()*0xf)*0x3e8*0x3c/0x2);}
